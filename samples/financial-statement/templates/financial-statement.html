<!DOCTYPE html>
<?scryber append-log='false' ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title>Financial Statement - {{model.companyName}}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="../styles/financial-statement.css" type="text/css" />
</head>
<body>
    <!-- ============================================
         HEADER
         ============================================ -->
    <div class="header">
        <div class="company-name">{{model.companyName}}</div>
        <div class="report-title">Consolidated Financial Statements</div>
        <div class="report-period">{{model.reportPeriod}}</div>
        <div class="report-meta">
            All amounts in {{model.currency}} thousands | Report Date: {{format(date(model.reportDate), 'MMMM dd, yyyy')}}
        </div>
    </div>

    <!-- ============================================
         CALCULATE ALL FINANCIAL METRICS
         ============================================ -->

    <!-- Balance Sheet Calculations -->
    <var data-id="totalCurrentAssets" data-value="{{sumOf(model.balanceSheet.currentAssets, .current)}}" />
    <var data-id="totalCurrentAssetsPrior" data-value="{{sumOf(model.balanceSheet.currentAssets, .prior)}}" />
    <var data-id="totalNonCurrentAssets" data-value="{{sumOf(model.balanceSheet.nonCurrentAssets, .current)}}" />
    <var data-id="totalNonCurrentAssetsPrior" data-value="{{sumOf(model.balanceSheet.nonCurrentAssets, .prior)}}" />
    <var data-id="totalAssets" data-value="{{totalCurrentAssets + totalNonCurrentAssets}}" />
    <var data-id="totalAssetsPrior" data-value="{{totalCurrentAssetsPrior + totalNonCurrentAssetsPrior}}" />

    <var data-id="totalCurrentLiabilities" data-value="{{sumOf(model.balanceSheet.currentLiabilities, .current)}}" />
    <var data-id="totalCurrentLiabilitiesPrior" data-value="{{sumOf(model.balanceSheet.currentLiabilities, .prior)}}" />
    <var data-id="totalNonCurrentLiabilities" data-value="{{sumOf(model.balanceSheet.nonCurrentLiabilities, .current)}}" />
    <var data-id="totalNonCurrentLiabilitiesPrior" data-value="{{sumOf(model.balanceSheet.nonCurrentLiabilities, .prior)}}" />
    <var data-id="totalLiabilities" data-value="{{totalCurrentLiabilities + totalNonCurrentLiabilities}}" />
    <var data-id="totalLiabilitiesPrior" data-value="{{totalCurrentLiabilitiesPrior + totalNonCurrentLiabilitiesPrior}}" />

    <var data-id="totalEquity" data-value="{{sumOf(model.balanceSheet.equity, .current)}}" />
    <var data-id="totalEquityPrior" data-value="{{sumOf(model.balanceSheet.equity, .prior)}}" />

    <!-- Income Statement Calculations -->
    <var data-id="totalRevenue" data-value="{{sumOf(model.incomeStatement.revenue, .current)}}" />
    <var data-id="totalRevenuePrior" data-value="{{sumOf(model.incomeStatement.revenue, .prior)}}" />

    <var data-id="totalCostOfRevenue" data-value="{{sumOf(model.incomeStatement.costOfRevenue, .current)}}" />
    <var data-id="totalCostOfRevenuePrior" data-value="{{sumOf(model.incomeStatement.costOfRevenue, .prior)}}" />

    <var data-id="grossProfit" data-value="{{totalRevenue - totalCostOfRevenue}}" />
    <var data-id="grossProfitPrior" data-value="{{totalRevenuePrior - totalCostOfRevenuePrior}}" />

    <var data-id="totalOpex" data-value="{{sumOf(model.incomeStatement.operatingExpenses, .current)}}" />
    <var data-id="totalOpexPrior" data-value="{{sumOf(model.incomeStatement.operatingExpenses, .prior)}}" />

    <var data-id="operatingIncome" data-value="{{grossProfit - totalOpex}}" />
    <var data-id="operatingIncomePrior" data-value="{{grossProfitPrior - totalOpexPrior}}" />

    <var data-id="otherIncome" data-value="{{sumOf(model.incomeStatement.otherIncomeExpense, .current)}}" />
    <var data-id="otherIncomePrior" data-value="{{sumOf(model.incomeStatement.otherIncomeExpense, .prior)}}" />

    <var data-id="incomeBeforeTax" data-value="{{operatingIncome + otherIncome}}" />
    <var data-id="incomeBeforeTaxPrior" data-value="{{operatingIncomePrior + otherIncomePrior}}" />

    <var data-id="netIncome" data-value="{{incomeBeforeTax - model.incomeStatement.incomeTax.current}}" />
    <var data-id="netIncomePrior" data-value="{{incomeBeforeTaxPrior - model.incomeStatement.incomeTax.prior}}" />

    <!-- Financial Ratio Calculations -->
    <var data-id="grossMargin" data-value="{{(grossProfit / totalRevenue) * 100}}" />
    <var data-id="grossMarginPrior" data-value="{{(grossProfitPrior / totalRevenuePrior) * 100}}" />

    <var data-id="operatingMargin" data-value="{{(operatingIncome / totalRevenue) * 100}}" />
    <var data-id="operatingMarginPrior" data-value="{{(operatingIncomePrior / totalRevenuePrior) * 100}}" />

    <var data-id="netMargin" data-value="{{(netIncome / totalRevenue) * 100}}" />
    <var data-id="netMarginPrior" data-value="{{(netIncomePrior / totalRevenuePrior) * 100}}" />

    <var data-id="currentRatio" data-value="{{totalCurrentAssets / totalCurrentLiabilities}}" />
    <var data-id="currentRatioPrior" data-value="{{totalCurrentAssetsPrior / totalCurrentLiabilitiesPrior}}" />

    <var data-id="debtToEquity" data-value="{{totalLiabilities / totalEquity}}" />
    <var data-id="debtToEquityPrior" data-value="{{totalLiabilitiesPrior / totalEquityPrior}}" />

    <var data-id="roe" data-value="{{(netIncome / totalEquity) * 100}}" />
    <var data-id="roePrior" data-value="{{(netIncomePrior / totalEquityPrior) * 100}}" />

    <!-- ============================================
         KEY FINANCIAL RATIOS (COVER PAGE)
         ============================================ -->
    <div class="section">
        <h2 class="section-title">Key Financial Ratios</h2>

        <div class="metrics-grid">
            <div class="metric-box">
                <span class="metric-label">Gross Profit Margin</span>
                <span class="metric-value">{{format(grossMargin / 100, 'P1')}}</span>
                <span class="metric-change {{if((grossMargin - grossMarginPrior) > 0, 'text-positive', 'text-negative')}}">
                    {{format((grossMargin - grossMarginPrior), 'N2')}}% vs prior year
                </span>
            </div>

            <div class="metric-box">
                <span class="metric-label">Operating Margin</span>
                <span class="metric-value">{{format(operatingMargin / 100, 'P1')}}</span>
                <span class="metric-change {{if((operatingMargin - operatingMarginPrior) > 0, 'text-positive', 'text-negative')}}">
                    {{format((operatingMargin - operatingMarginPrior), 'N2')}}% vs prior year
                </span>
            </div>

            <div class="metric-box">
                <span class="metric-label">Net Profit Margin</span>
                <span class="metric-value">{{format(netMargin / 100, 'P1')}}</span>
                <span class="metric-change {{if((netMargin - netMarginPrior) > 0, 'text-positive', 'text-negative')}}">
                    {{format((netMargin - netMarginPrior), 'N2')}}% vs prior year
                </span>
            </div>

            <div class="metric-box">
                <span class="metric-label">Current Ratio</span>
                <span class="metric-value">{{format(currentRatio, 'N2')}}</span>
                <span class="metric-change {{if((currentRatio - currentRatioPrior) > 0, 'text-positive', 'text-negative')}}">
                    {{format((currentRatio - currentRatioPrior), 'N2')}} vs prior year
                </span>
            </div>

            <div class="metric-box">
                <span class="metric-label">Debt-to-Equity</span>
                <span class="metric-value">{{format(debtToEquity, 'N2')}}</span>
                <span class="metric-change {{if((debtToEquity - debtToEquityPrior) &lt; 0, 'text-positive', 'text-negative')}}">
                    {{format((debtToEquity - debtToEquityPrior), 'N2')}} vs prior year
                </span>
            </div>

            <div class="metric-box">
                <span class="metric-label">Return on Equity</span>
                <span class="metric-value">{{format(roe / 100, 'P1')}}</span>
                <span class="metric-change {{if((roe - roePrior) > 0, 'text-positive', 'text-negative')}}">
                    {{format((roe - roePrior), 'N2')}}% vs prior year
                </span>
            </div>
        </div>
    </div>

    <!-- ============================================
         BALANCE SHEET
         ============================================ -->
    <div class="section page-break">
        <h2 class="section-title">Consolidated Balance Sheet</h2>

        <table>
            <thead>
                <tr>
                    <th style="width: 50%;">Assets</th>
                    <th style="width: 20%;" class="text-right">{{model.fiscalYear}}</th>
                    <th style="width: 20%;" class="text-right">{{model.previousFiscalYear}}</th>
                    <th style="width: 10%;" class="text-right">Change %</th>
                </tr>
            </thead>
            <tbody>
                <!-- Current Assets -->
                <tr>
                    <td colspan="4" class="text-bold">Current Assets</td>
                </tr>
                {{#each model.balanceSheet.currentAssets}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="subtotal-row">
                    <td>Total Current Assets</td>
                    <td class="amount">{{format(totalCurrentAssets / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalCurrentAssetsPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalCurrentAssets - totalCurrentAssetsPrior) > 0, 'percentage-positive', 'percentage-negative')}}">{{format(((totalCurrentAssets - totalCurrentAssetsPrior) / totalCurrentAssetsPrior), 'P1')}}</td>
                </tr>

                <!-- Non-Current Assets -->
                <tr>
                    <td colspan="4" class="text-bold">Non-Current Assets</td>
                </tr>
                {{#each model.balanceSheet.nonCurrentAssets}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="subtotal-row">
                    <td>Total Non-Current Assets</td>
                    <td class="amount">{{format(totalNonCurrentAssets / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalNonCurrentAssetsPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalNonCurrentAssets - totalNonCurrentAssetsPrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((totalNonCurrentAssets - totalNonCurrentAssetsPrior) / totalNonCurrentAssetsPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Total Assets -->
                <tr class="grand-total">
                    <td>TOTAL ASSETS</td>
                    <td class="amount">{{format(totalAssets / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalAssetsPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalAssets - totalAssetsPrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((totalAssets - totalAssetsPrior) / totalAssetsPrior), 'P1')}}
                    </td>
                </tr>
            </tbody>
        </table>

        <table>
            <thead>
                <tr>
                    <th style="width: 50%;">Liabilities &amp; Equity</th>
                    <th style="width: 20%;" class="text-right">{{model.fiscalYear}}</th>
                    <th style="width: 20%;" class="text-right">{{model.previousFiscalYear}}</th>
                    <th style="width: 10%;" class="text-right">Change %</th>
                </tr>
            </thead>
            <tbody>
                <!-- Current Liabilities -->
                <tr>
                    <td colspan="4" class="text-bold">Current Liabilities</td>
                </tr>
                {{#each model.balanceSheet.currentLiabilities}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="subtotal-row">
                    <td>Total Current Liabilities</td>
                    <td class="amount">{{format(totalCurrentLiabilities / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalCurrentLiabilitiesPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalCurrentLiabilities - totalCurrentLiabilitiesPrior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((totalCurrentLiabilities - totalCurrentLiabilitiesPrior) / totalCurrentLiabilitiesPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Non-Current Liabilities -->
                <tr>
                    <td colspan="4" class="text-bold">Non-Current Liabilities</td>
                </tr>
                {{#each model.balanceSheet.nonCurrentLiabilities}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="subtotal-row">
                    <td>Total Non-Current Liabilities</td>
                    <td class="amount">{{format(totalNonCurrentLiabilities / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalNonCurrentLiabilitiesPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalNonCurrentLiabilities - totalNonCurrentLiabilitiesPrior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((totalNonCurrentLiabilities - totalNonCurrentLiabilitiesPrior) / totalNonCurrentLiabilitiesPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Total Liabilities -->
                <tr class="total-row">
                    <td>Total Liabilities</td>
                    <td class="amount">{{format(totalLiabilities / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalLiabilitiesPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalLiabilities - totalLiabilitiesPrior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((totalLiabilities - totalLiabilitiesPrior) / totalLiabilitiesPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Equity -->
                <tr>
                    <td colspan="4" class="text-bold">Stockholders' Equity</td>
                </tr>
                {{#each model.balanceSheet.equity}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="total-row">
                    <td>Total Stockholders' Equity</td>
                    <td class="amount">{{format(totalEquity / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalEquityPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalEquity - totalEquityPrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((totalEquity - totalEquityPrior) / totalEquityPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Total Liabilities and Equity -->
                <tr class="grand-total">
                    <td>TOTAL LIABILITIES &amp; EQUITY</td>
                    <td class="amount">{{format((totalLiabilities + totalEquity) / 1000, 'N0')}}</td>
                    <td class="amount">{{format((totalLiabilitiesPrior + totalEquityPrior) / 1000, 'N0')}}</td>
                    <td class="percentage {{if(((totalLiabilities + totalEquity) - (totalLiabilitiesPrior + totalEquityPrior)) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format((((totalLiabilities + totalEquity) - (totalLiabilitiesPrior + totalEquityPrior)) / (totalLiabilitiesPrior + totalEquityPrior)), 'P1')}}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ============================================
         INCOME STATEMENT
         ============================================ -->
    <div class="section page-break">
        <h2 class="section-title">Consolidated Income Statement</h2>

        <table>
            <thead>
                <tr>
                    <th style="width: 50%;">Income Statement</th>
                    <th style="width: 20%;" class="text-right">{{model.fiscalYear}}</th>
                    <th style="width: 20%;" class="text-right">{{model.previousFiscalYear}}</th>
                    <th style="width: 10%;" class="text-right">Change %</th>
                </tr>
            </thead>
            <tbody>
                <!-- Revenue -->
                <tr>
                    <td colspan="4" class="text-bold">Revenue</td>
                </tr>
                {{#each model.incomeStatement.revenue}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="total-row">
                    <td>Total Revenue</td>
                    <td class="amount">{{format(totalRevenue / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalRevenuePrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalRevenue - totalRevenuePrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((totalRevenue - totalRevenuePrior) / totalRevenuePrior), 'P1')}}
                    </td>
                </tr>

                <!-- Cost of Revenue -->
                <tr>
                    <td colspan="4" class="text-bold">Cost of Revenue</td>
                </tr>
                {{#each model.incomeStatement.costOfRevenue}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="subtotal-row">
                    <td>Total Cost of Revenue</td>
                    <td class="amount">{{format(totalCostOfRevenue / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalCostOfRevenuePrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalCostOfRevenue - totalCostOfRevenuePrior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((totalCostOfRevenue - totalCostOfRevenuePrior) / totalCostOfRevenuePrior), 'P1')}}
                    </td>
                </tr>

                <!-- Gross Profit -->
                <tr class="total-row">
                    <td>Gross Profit</td>
                    <td class="amount">{{format(grossProfit / 1000, 'N0')}}</td>
                    <td class="amount">{{format(grossProfitPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((grossProfit - grossProfitPrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((grossProfit - grossProfitPrior) / grossProfitPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Operating Expenses -->
                <tr>
                    <td colspan="4" class="text-bold">Operating Expenses</td>
                </tr>
                {{#each model.incomeStatement.operatingExpenses}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((this.current - this.prior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((this.current - this.prior) / this.prior), 'P1')}}
                    </td>
                </tr>
                {{/each}}
                <tr class="subtotal-row">
                    <td>Total Operating Expenses</td>
                    <td class="amount">{{format(totalOpex / 1000, 'N0')}}</td>
                    <td class="amount">{{format(totalOpexPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((totalOpex - totalOpexPrior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((totalOpex - totalOpexPrior) / totalOpexPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Operating Income -->
                <tr class="total-row">
                    <td>Operating Income</td>
                    <td class="amount">{{format(operatingIncome / 1000, 'N0')}}</td>
                    <td class="amount">{{format(operatingIncomePrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((operatingIncome - operatingIncomePrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((operatingIncome - operatingIncomePrior) / operatingIncomePrior), 'P1')}}
                    </td>
                </tr>

                <!-- Other Income/Expense -->
                <tr>
                    <td colspan="4" class="text-bold">Other Income (Expense)</td>
                </tr>
                {{#each model.incomeStatement.otherIncomeExpense}}
                <tr>
                    <td class="indent-1">{{this.name}}</td>
                    <td class="amount">{{format(this.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(this.prior / 1000, 'N0')}}</td>
                    <td class="percentage">â€”</td>
                </tr>
                {{/each}}

                <!-- Income Before Tax -->
                <tr class="subtotal-row">
                    <td>Income Before Income Tax</td>
                    <td class="amount">{{format(incomeBeforeTax / 1000, 'N0')}}</td>
                    <td class="amount">{{format(incomeBeforeTaxPrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((incomeBeforeTax - incomeBeforeTaxPrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((incomeBeforeTax - incomeBeforeTaxPrior) / incomeBeforeTaxPrior), 'P1')}}
                    </td>
                </tr>

                <!-- Income Tax -->
                <tr>
                    <td class="indent-1">Income Tax Expense</td>
                    <td class="amount">{{format(model.incomeStatement.incomeTax.current / 1000, 'N0')}}</td>
                    <td class="amount">{{format(model.incomeStatement.incomeTax.prior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((model.incomeStatement.incomeTax.current - model.incomeStatement.incomeTax.prior) > 0, 'percentage-negative', 'percentage-positive')}}">
                        {{format(((model.incomeStatement.incomeTax.current - model.incomeStatement.incomeTax.prior) / model.incomeStatement.incomeTax.prior), 'P1')}}
                    </td>
                </tr>

                <!-- Net Income -->
                <tr class="grand-total">
                    <td>NET INCOME</td>
                    <td class="amount">{{format(netIncome / 1000, 'N0')}}</td>
                    <td class="amount">{{format(netIncomePrior / 1000, 'N0')}}</td>
                    <td class="percentage {{if((netIncome - netIncomePrior) > 0, 'percentage-positive', 'percentage-negative')}}">
                        {{format(((netIncome - netIncomePrior) / netIncomePrior), 'P1')}}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ============================================
         CHARTS
         ============================================ -->
    <div class="section page-break">
        <h2 class="section-title">Quarterly Revenue Trend</h2>

        <div class="chart-container">
            <svg width="100%" height="180" viewBox="0 0 600 180" xmlns="http://www.w3.org/2000/svg">
                <var data-id="maxQuarterlyRevenue" data-value="{{maxOf(model.quarterlyRevenue, .revenue)}}" />

                <!-- Grid -->
                <line x1="60" y1="20" x2="60" y2="140" class="chart-axis" />
                <line x1="60" y1="140" x2="580" y2="140" class="chart-axis" />

                <!-- Bars -->
                {{#each model.quarterlyRevenue}}
                    <var data-id="barX" data-value="{{100 + (@index * 120)}}" />
                    <var data-id="barHeight" data-value="{{(this.revenue / maxQuarterlyRevenue) * 110}}" />
                    <var data-id="barY" data-value="{{140 - barHeight}}" />

                    <!-- Bar -->
                    <rect x="{{barX}}" y="{{barY}}" width="80" height="{{barHeight}}" class="chart-bar" />

                    <!-- Value label -->
                    <text x="{{barX + 40}}" y="{{barY - 6}}" class="chart-value" text-anchor="middle">
                        ${{format(this.revenue / 1000000, 'N0')}}M
                    </text>

                    <!-- Quarter label -->
                    <text x="{{barX + 40}}" y="160" class="chart-label" text-anchor="middle">
                        {{this.quarter}}
                    </text>
                {{/each}}
            </svg>
        </div>

        <h2 class="section-subtitle">Revenue by Geographic Segment</h2>

        <div class="chart-container">
            <svg width="100%" height="180" viewBox="0 0 600 180" xmlns="http://www.w3.org/2000/svg">
                <var data-id="maxSegmentRevenue" data-value="{{maxOf(model.revenueBySegment, .revenue)}}" />

                <!-- Grid -->
                <line x1="60" y1="20" x2="60" y2="140" class="chart-axis" />
                <line x1="60" y1="140" x2="580" y2="140" class="chart-axis" />

                <!-- Bars with percentages -->
                {{#each model.revenueBySegment}}
                    <var data-id="segBarX" data-value="{{80 + (@index * 130)}}" />
                    <var data-id="segBarHeight" data-value="{{(this.revenue / maxSegmentRevenue) * 110}}" />
                    <var data-id="segBarY" data-value="{{140 - segBarHeight}}" />

                    <!-- Bar -->
                    <rect x="{{segBarX}}" y="{{segBarY}}" width="90" height="{{segBarHeight}}" class="chart-bar-accent" />

                    <!-- Value label -->
                    <text x="{{segBarX + 45}}" y="{{segBarY - 14}}" class="chart-value" text-anchor="middle">
                        ${{format(this.revenue / 1000000, 'N0')}}M
                    </text>

                    <!-- Percentage label -->
                    <text x="{{segBarX + 45}}" y="{{segBarY - 2}}" class="chart-label" text-anchor="middle">
                        ({{format(this.percentage / 100, 'P1')}})
                    </text>

                    <!-- Segment name -->
                    <text x="{{segBarX + 45}}" y="160" class="chart-label" text-anchor="middle">
                        {{this.segment}}
                    </text>
                {{/each}}
            </svg>
        </div>
    </div>

    <!-- Footer -->
    <footer></footer>
    <continuation-footer class="footer">
        <p>{{model.companyName}} - Consolidated Financial Statements | {{model.reportPeriod}}</p>
        <p>Page <page-number /> of <page-count /></p>
    </continuation-footer>
</body>
</html>
